// this is a toplevel source file. Give as command line argument to j1comp.

#include(CPU.txt)
#include(system.txt)
#include(system.ASCII.txt)

VAR:offset=0

:main
	looptestOuter
	system.terminate
:looptestOuter
	-3 3 DO	
		dup offset !		
		looptest
	LOOP
;

:looptest
0				// i loop start
10				// i loop end 
DO				// for i
    >r				// save i
    system.ascii.a r@ +		// j loop start
    system.ascii.z 1 + 9 - r@ +		// j loop end
    DO	// for j
	dup offset @ + system.emit
    LOOP
    system.ascii.cr system.emit
    system.ascii.nl system.emit
    r>				// restore loop var, clear return stack
LOOP
;



:start
0x40	// @
:nextChar
dup 0x1000 io!

dup 0x60 = IF 
     drop 
     BRA:start 
ENDIF
1 +
BRA:nextChar
BRA:start
/*

:myFun dup drop ;
::deadbeef 0xDEADBEEF swap drop ;
deadbeef deadbeef
VAR:gumbo=1024
VAR:gumbo2=1025
VAR:gumbo3=1026
gumbo dup @ 1 + ! gumbo2 gumbo3

IF
-1
ELSE
1
ENDIF
core.noop
:hello
BRA:hello
*/
1
DO
LOOP